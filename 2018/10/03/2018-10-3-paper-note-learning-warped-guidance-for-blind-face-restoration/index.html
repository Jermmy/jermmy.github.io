<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="计算机视觉,深度学习,论文," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="这篇论文主要是讲人脸修复的，所谓人脸修复，其实就是将低清的，或者经过压缩等操作的人脸图像进行高清复原。这可以近似为针对人脸的图像修复工作。在图像修复中，我们都会假设退化的图像是高清图像经过某种函数映射后得到的（比如，由高清图像得到一张模糊的图像可能是使用了高斯模糊核），因此，图像修复的本质就是把这个函数映射找出来。由于神经网络可以近似任意函数，因此在深度学习时代，图像修复已经是一个被解决得比较好的">
<meta name="keywords" content="计算机视觉,深度学习,论文">
<meta property="og:type" content="article">
<meta property="og:title" content="论文笔记：Learning warped guidance for blind face restoration">
<meta property="og:url" content="https://jermmy.github.io/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/index.html">
<meta property="og:site_name" content="Jermmy&#39;s Lazy Blog">
<meta property="og:description" content="这篇论文主要是讲人脸修复的，所谓人脸修复，其实就是将低清的，或者经过压缩等操作的人脸图像进行高清复原。这可以近似为针对人脸的图像修复工作。在图像修复中，我们都会假设退化的图像是高清图像经过某种函数映射后得到的（比如，由高清图像得到一张模糊的图像可能是使用了高斯模糊核），因此，图像修复的本质就是把这个函数映射找出来。由于神经网络可以近似任意函数，因此在深度学习时代，图像修复已经是一个被解决得比较好的">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://jermmy.github.io/images/2018-10-3/network-arch.jpg">
<meta property="og:image" content="https://jermmy.github.io/images/2018-10-3/wrapnet.png">
<meta property="og:image" content="https://jermmy.github.io/images/2018-10-3/wrap.png">
<meta property="og:image" content="https://jermmy.github.io/images/2018-10-3/recnet.png">
<meta property="og:updated_time" content="2018-12-16T01:35:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="论文笔记：Learning warped guidance for blind face restoration">
<meta name="twitter:description" content="这篇论文主要是讲人脸修复的，所谓人脸修复，其实就是将低清的，或者经过压缩等操作的人脸图像进行高清复原。这可以近似为针对人脸的图像修复工作。在图像修复中，我们都会假设退化的图像是高清图像经过某种函数映射后得到的（比如，由高清图像得到一张模糊的图像可能是使用了高斯模糊核），因此，图像修复的本质就是把这个函数映射找出来。由于神经网络可以近似任意函数，因此在深度学习时代，图像修复已经是一个被解决得比较好的">
<meta name="twitter:image" content="https://jermmy.github.io/images/2018-10-3/network-arch.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jermmy.github.io/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/"/>





  <title>论文笔记：Learning warped guidance for blind face restoration | Jermmy's Lazy Blog</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-84659849-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4d053879042f439aeb8fc5996a907b6b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jermmy's Lazy Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://jermmy.github.io/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jermmy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jermmy's Lazy Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                论文笔记：Learning warped guidance for blind face restoration
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-03T16:18:38+08:00">
                2018-10-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机视觉/" itemprop="url" rel="index">
                    <span itemprop="name">计算机视觉</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/" class="leancloud_visitors" data-flag-title="论文笔记：Learning warped guidance for blind face restoration">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <p>这篇论文主要是讲人脸修复的，所谓人脸修复，其实就是将低清的，或者经过压缩等操作的人脸图像进行高清复原。这可以近似为针对人脸的图像修复工作。在图像修复中，我们都会假设退化的图像是高清图像经过某种函数映射后得到的（比如，由高清图像得到一张模糊的图像可能是使用了高斯模糊核），因此，图像修复的本质就是把这个函数映射找出来。由于神经网络可以近似任意函数，因此在深度学习时代，图像修复已经是一个被解决得比较好的问题了。比如，在图像去噪或者超分任务中，U-Net、FCN 之类的网络结构已经成为标配了。</p>
<p>不过，针对人脸的图像修复则是一个更为严苛的任务。原因主要是以下两点：</p>
<ol type="1">
<li>对于一般的图像，大家可能不会太在意细节恢复得好还是差，但对于人脸来说，由于这是人类最熟悉的部分，因此人脸中的很多细节，如一些皱纹、酒窝等都需要恢复出来才能让人满意，因此，这是一个粒度更细的图像修复任务。</li>
<li>另外，通常的图像修复都是针对一种退化场景设计的，比如，在去噪任务中，可能就只是针对某种或某几种噪声而言，而不考虑图像模糊等其他因素，因此任务相对简单。但如果退化的种类太多，退化函数本身可能会非常复杂，即使神经网络也未必能近似出来。正如标题中 <strong>blind</strong> 所言，退化函数的类型、数量我们是无法事先获悉的。事实上，论文考虑了 jpeg 压缩、高斯模糊、高斯噪声、图片放缩等退化方式，并且对每种方式进行随机组合，因此退化函数是非常复杂的。</li>
</ol>
<center>
<img src="/images/2018-10-3/network-arch.jpg" width="600px">
</center>
<a id="more"></a>
<h3 id="论文方法">论文方法</h3>
<p>为了让任务简单一些，论文用了一张引导图来引入更多先验信息，这里所说的引导图是同一个人在不同姿势以及环境下的高清图片。这个想法也是很正常的，试想一下，对于一张严重模糊的人脸来说，我们如何确定恢复出来的图像是否有酒窝、有眼角纹呢？在没有任何先验的情况下，这是一个 mission impossible，因此，有了一张引导图后，在修复过程中就显得有据可考了。</p>
<p>不过，由于引导图中人脸的姿势和退化图是不一致的，这对于模型来说引导的作用可能偏弱（毕竟神经网络又不知道引导图中的五官位置在哪），因此，论文先对引导图进行矫正，再用这张矫正的引导图去引导网络修复退化的图片。所以，论文的架构总的来说分为两部分：WarpNet 和 RecNet。</p>
<h4 id="warpnet">WarpNet</h4>
<p>关于如何对引导图的人脸进行矫正的问题，熟悉 STN(Spatial Transform Network) 的读者一定有所了解了。其实就是计算出矫正 (warp) 后的图像中每个像素点对应原图的位置，再根据双线性插值得到新的图像。论文用一个 WarpNet 来做这件事情。这个网络的输入是两张叠在一起 (channel通道) 的图片 &lt;退化图，引导图&gt;，网络的结构采用的 auto-encoder，而训练的依据是 warp 之后人脸的关键点要跟退化图人脸的关键点对齐，也就是图中的 landmark loss。论文采用的数据集其实是不同人的多张高清图片，作者从这些图片中选出正脸的图片作为引导图，然后将其他图片随机采用某种算法 (jpeg压缩等) 退化后得到退化图。因此，可以事先采用其他算法得到每张人脸的关键点，然后用这些关键点来做 landmark loss。</p>
<center>
<img src="/images/2018-10-3/wrapnet.png" width="600px">
</center>
<p>举个接地气的例子。我们可以让网络的输出为一个像素坐标的二维向量矩阵 <span class="math inline">\(R^{H \times W \times 2}\)</span>，这里的 <span class="math inline">\(H\)</span>、<span class="math inline">\(W\)</span> 分指图片的高宽，2 是因为每个像素点需要对应 (x, y) 两个数值作为像素位置。例如，如果我们检测到引导图上有个关键点在脸颊的位置是 (20, 10) ，而同样是脸颊这个点，在退化图上的位置是 (22, 14)，那么 WarpNet 算出来的矩阵在 (22, 14) 这个点的值理论上就应该是 (20, 10)。之后，我们就可以根据插值的方式，将 warp 后的图片在 (22, 14) 这个点的像素值填充为原图在 (20, 10) 这个点的像素值。这个矩阵就是论文中所说的 flow field。而 landmark loss 其实就是对网络输出来的矩阵做一次回归，让矩阵这些位置上的向量值和我们理论上需要的向量值做一次 MSE Loss(Mean Square Error)。</p>
<center>
<img src="/images/2018-10-3/wrap.png" width="500px">
</center>
<p>不过，关键点的数量毕竟是有限的，这样训练出来的网络虽然可以保证关键点的部位是对齐的，但其他部位却可能偏得很厉害，正因如此，论文中还使用 TV Loss(Total Variation Loss)。这个 Loss 主要是保证 warp 后的图像能平滑一点。比如说，眼珠 warp 后的新像素位置与原来的位置相比偏离了 (10, 20)，那么眼珠周围的像素 warp 后的像素位置与原像素偏离的距离应该也是 (10, 20) 左右，这样一来，只要保证每个像素偏移的距离都差不多，整幅图像就相对平滑一点 (所谓平滑，就是说 warp 后的人脸不会太过扭曲)。具体实现的时候可以通过 flow field 矩阵的梯度来实现。关于 TV Loss 的更多信息，请参考其他资料。</p>
<h4 id="recnet">RecNet</h4>
<p>训练完 WarpNet 后，就来到论文的重头戏 RecNet。</p>
<center>
<img src="/images/2018-10-3/recnet.png" width="600px">
</center>
<p>和其他图像超分的方法类似，RecNet 采用的是 U-Net 结构，它的输入与 WarpNet 类似，也是将 warp 后的图片和退化图叠在一起。在 Loss 选择上，主要是考虑了 MSE Loss 和 VGG Loss。前者是 auto-encoder 中常用的 loss，即通过和 Ground truth 计算逐像素的均方误差来恢复高清图像，而后者通常又称为感知误差 (perceptual loss)，这是借鉴了图像风格化中的思路，即根据一个已经训练好的 VGG 网络，将网络输出的图片和 Ground truth 都输入 VGG 后，对 feature map 做 MSE Loss (选择哪一层 feature map 需要进行实验尝试，一般会用第三层后的)，目的是希望二者在内容上能保持一致。</p>
<p>但是，仅仅靠这两个 Loss 的话，就只能做到普通的图像修复或超分的效果，对于一些更细节的纹理，这两个 Loss 实在是恢复不出来的 (均方误差其实是在拟合一个整体平均值，而纹理这种高频的信息往往会被当作异常点，因此拟合效果不佳)。再者，人脸中的细节还得靠引导图来提供，如果引导图中有纹理，那么就应该恢复出这些纹理，反之亦然。这类似于条件概率，要给网络加一个开关的作用。那如何引导 RecNet 学习呢？论文中采用了 cGAN(Conditional GAN) 的思路，我觉得这个想法也是水到渠成的，首先，MSE Loss 难以拟合出最真实的人脸数据分布，但 GAN 其实可以把这个分布拟合得更好，另外，用了 Condition 后，也可以起到引导的作用 (其实 RecNet 中将引导图和退化图 concat 在一起，本身就很类似 cGAN)。</p>
<p>论文中总共用了两个 GAN，一个是作用在整幅图像上 (Global cGAN)，一个作用在人脸区域 (Local GAN)。Global cGAN 中<strong>判别器</strong>的输入是三张图片的叠加，真实样本是 (引导图、warp 图、Ground truth)，假样本则是 (引导图、warp 图、网络输出)。而 Local GAN 论文一笔带过了，我猜测应该就是个普通的 GAN，即真实样本是 Ground truth，而假样本是网络输出。</p>
<p>然而，对论文的这种设计方式，我个人持保留意见。首先，cGAN 的想法是正确的，但我认为这个 GAN 的作用应该是要让 RecNet 可以更好地恢复出纹理，因此判别器对纹理的识别能力应该要尽可能的强，而纹理这种东西和图像内容是无关的，也就是说，对于图像中的每个小块，它都能起到判别作用，因此，我觉得判别器的输入应该是一个个图片块，而不是整张图像或整个人脸区域，所以，我倾向于用 Patch cGAN 来做。</p>
<h3 id="实验">实验</h3>
<p>说来惭愧，我自己在复现这篇论文的时候，发现训练出来的模型成了一个普通的去噪/超分模型，对于纹理的修复效果很差，引导图几乎不起作用 (也就是说，不管引导图是什么，重建出来的图片几乎是一样的)。我觉得可能 RecNet 在设计上还可以再优化一下，比如把 content 和 style 分出来之类的。当然，可能是我的能力和大佬们有差距，做不出论文的效果。所以，实验的结果就只能请各位看官自己去论文里面找了。</p>
<h5 id="update-2018.11.01">========== Update 2018.11.01 ==============</h5>
<p>经过一个月的奋斗，博主终于复现出了原论文的效果😭。这里面的关键是训练的时候要加大退化的力度，增加退化图片的比例，这样，网络在重建图像的时候，为了获得更好的重建效果，会更多地考虑引导图的信息，从而加大引导图对应的权重系数。另一方面，我发现如果退化的程度较轻，网络会更多地从退化图本身获取信息，淡化引导图的影响，相当于起到<strong>开关</strong>的作用，而加不加 cGAN 的影响其实不大，这个发现倒是让我有点意外。</p>
<h3 id="参考">参考</h3>
<ul>
<li><a href="https://arxiv.org/abs/1804.04829" target="_blank" rel="noopener">Learning Warped Guidance for Blind Face Restoration</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>本文作者：</strong>
      Jermmy
    </li>
    <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://jermmy.github.io/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/" title="论文笔记：Learning warped guidance for blind face restoration">https://jermmy.github.io/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
    </li>
  </ul>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/计算机视觉/" rel="tag"># 计算机视觉</a>
          
            <a href="/tags/深度学习/" rel="tag"># 深度学习</a>
          
            <a href="/tags/论文/" rel="tag"># 论文</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/04/2018-8-4-how-to-run-deep-learning-on-mobile/" rel="next" title="如何在手机上跑深度神经网络">
                <i class="fa fa-chevron-left"></i> 如何在手机上跑深度神经网络
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/25/2018-11-25-how-to-write-rnn-in-pytorch-and-tensorflow/" rel="prev" title="RNN，写起来真的烦">
                RNN，写起来真的烦 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Jermmy" />
          <p class="site-author-name" itemprop="name">Jermmy</p>
           
              <p class="site-description motion-element" itemprop="description">In me the tiger sniffs the rose.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">94</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jermmy" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.ruanyifeng.com/blog/" title="阮一峰" target="_blank">阮一峰</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://freemind.pluskid.org/" title="pluskid" target="_blank">pluskid</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#论文方法"><span class="nav-number">1.</span> <span class="nav-text">论文方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#warpnet"><span class="nav-number">1.1.</span> <span class="nav-text">WarpNet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#recnet"><span class="nav-number">1.2.</span> <span class="nav-text">RecNet</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实验"><span class="nav-number">2.</span> <span class="nav-text">实验</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#update-2018.11.01"><span class="nav-number">2.0.1.</span> <span class="nav-text">========== Update 2018.11.01 ==============</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考"><span class="nav-number">3.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jermmy</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://jermmy.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://jermmy.github.io/2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/';
          this.page.identifier = '2018/10/03/2018-10-3-paper-note-learning-warped-guidance-for-blind-face-restoration/';
          this.page.title = '论文笔记：Learning warped guidance for blind face restoration';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://jermmy.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("FfkJQoNEh55mO6eDSUYJj0i1-gzGzoHsz", "sjxRrTn3UCxYsAQceJKYEfO7");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
